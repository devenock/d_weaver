<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Create account – DiagramGen</title>
  <script>(function(){try{if(!localStorage.getItem('theme'))document.documentElement.classList.add('dark');}catch(e){}})();</script>
  <link rel="stylesheet" href="/static/css/site.css" />
  <script src="/static/js/theme.js"></script>
  <script src="https://unpkg.com/htmx.org@2.0.4" defer></script>
</head>
<body class="min-h-screen bg-background">
  <div class="auth-layout">
    <!-- Left panel (AuthShell marketing) – visible on lg -->
    <div class="auth-panel-left relative bg-muted/30">
      <div class="absolute inset-0 bg-primary/5 pointer-events-none" style="background: linear-gradient(135deg, hsl(var(--primary) / 0.08), transparent 50%);"></div>
      <div class="relative flex flex-col w-full p-10">
        <a href="/" class="inline-flex items-center gap-2 text-lg font-semibold tracking-tight" style="text-decoration: none; color: inherit;">
          <span class="inline-flex h-9 w-9 items-center justify-center rounded-xl bg-primary text-primary-foreground shadow-sm">✨</span>
          <span class="text-primary" style="background: linear-gradient(to right, hsl(var(--primary)), hsl(var(--primary) / 0.8)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">DiagramGen</span>
        </a>
        <div class="mt-16 space-y-6">
          <h2 class="text-4xl font-semibold leading-tight tracking-tight">Create your account.</h2>
          <p class="max-w-xl text-base leading-relaxed text-muted-foreground">Start building diagrams, organize workspaces, and export/share in a few clicks.</p>
          <div class="mt-8 space-y-3 text-sm">
            <div class="flex items-start gap-3"><span class="text-primary">✓</span> <span class="text-muted-foreground">Clean defaults with a modern, consistent design system.</span></div>
            <div class="flex items-start gap-3"><span class="text-primary">✓</span> <span class="text-muted-foreground">Workspaces and sharing built around real collaboration.</span></div>
            <div class="flex items-start gap-3"><span class="text-primary">✓</span> <span class="text-muted-foreground">Export-ready diagrams (PNG/SVG/PDF) when you need them.</span></div>
          </div>
        </div>
        <div class="mt-auto pt-10 text-xs text-muted-foreground">© 2024 DiagramGen</div>
      </div>
    </div>

    <!-- Right panel: form -->
    <div class="auth-panel-right">
      <div class="flex items-center justify-between px-4 py-4 lg:px-10">
        <a href="/" class="text-sm text-muted-foreground" style="text-decoration: none;">← Back to home</a>
        <button type="button" class="theme-toggle btn btn-ghost btn-sm" aria-label="Toggle theme"></button>
      </div>
      <div class="flex flex-1 items-center justify-center px-4 pb-12 pt-6 lg:px-10">
        <div class="auth-form-wrap w-full">
          <div class="auth-form-card rounded-2xl bg-card">
            <div class="space-y-2">
              <h1 class="text-2xl font-semibold tracking-tight">Create account</h1>
              <p class="text-sm text-muted-foreground" style="color: hsl(var(--muted-foreground));">Sign up to save diagrams and collaborate with your team.</p>
            </div>

            <div id="signup-error" class="hidden mt-4 alert-error" role="alert"></div>

            <form method="post" action="/signup" class="space-y-4" style="margin-top: 1.5rem;">
              <input type="hidden" name="redirect" id="redirect" value="/dashboard" />
              <div class="space-y-2">
                <label for="email" class="block text-sm font-medium text-foreground">Email</label>
                <input id="email" name="email" type="email" placeholder="you@company.com" autocomplete="email" required class="h-11" style="height: 2.75rem;" />
              </div>
              <div class="space-y-2">
                <label for="password" class="block text-sm font-medium text-foreground">Password</label>
                <input id="password" name="password" type="password" placeholder="••••••••" autocomplete="new-password" minlength="8" required class="h-11" style="height: 2.75rem;" />
              </div>
              <button type="submit" class="btn btn-primary h-11 w-full" style="height: 2.75rem; width: 100%;">Continue</button>
            </form>

            <div class="mt-6 text-center text-sm text-muted-foreground">
              Already have an account? <a href="/login" class="link-primary font-medium">Sign in</a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <script>
    (function() {
      var q = location.search;
      var m = /[?&]redirect=([^&]+)/.exec(q);
      if (m && m[1]) { var r = decodeURIComponent(m[1]); if (r.startsWith('/')) document.getElementById('redirect').value = r; }
      var err = /[?&]error=([^&]+)/.exec(q);
      var msg = { signup_failed: 'Sign up failed. Email may already be in use.', invalid_input: 'Please enter email and password (min 8 characters).' };
      if (err && msg[err[1]]) {
        var el = document.getElementById('signup-error');
        el.textContent = msg[err[1]];
        el.classList.remove('hidden');
      }
    })();
  </script>
</body>
</html>
